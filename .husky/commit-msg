# Validar formato del mensaje de commit (conventional commits)
commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
  echo ""
  echo "❌ Formato de mensaje de commit inválido!"
  echo ""
  echo "El mensaje debe seguir el formato: tipo(scope): descripción"
  echo ""
  echo "Tipos permitidos:"
  echo "  • feat:     Nueva funcionalidad"
  echo "  • fix:      Corrección de bugs"
  echo "  • docs:     Cambios en documentación"
  echo "  • style:    Cambios de formato (espacios, comas, etc)"
  echo "  • refactor: Refactorización de código"
  echo "  • test:     Agregar o corregir tests"
  echo "  • chore:    Cambios en build, dependencias, etc"
  echo "  • perf:     Mejoras de rendimiento"
  echo "  • ci:       Cambios en CI/CD"
  echo "  • build:    Cambios en sistema de build"
  echo "  • revert:   Revertir commits"
  echo ""
  echo "Ejemplos:"
  echo "  • feat: add new language selector"
  echo "  • fix(navbar): resolve mobile menu overflow"
  echo "  • docs: update installation guide"
  echo ""
  exit 1
fi

echo "✅ Mensaje de commit válido"